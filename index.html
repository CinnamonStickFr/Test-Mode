<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Classic Minecraft (iframe) — Launcher</title>
  <style>
    :root {
      --bg: #0b1220;
      --card: #0f1724;
      --accent: #0ea5a4;
      --text: #e6eef6;
    }
    html,body { height:100%; margin:0; font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial; background:linear-gradient(180deg,#071124 0%, #071a2a 100%); color:var(--text) }
    .wrap { max-width:1100px; margin:18px auto; padding:18px; }
    header { display:flex; align-items:center; gap:14px; margin-bottom:14px; }
    .logo {
      width:56px;height:56px;border-radius:10px;background:linear-gradient(135deg,#2b6cb0,#9b2c2c);
      display:flex; align-items:center; justify-content:center; font-weight:700; font-size:20px; box-shadow:0 6px 18px rgba(0,0,0,0.5);
    }
    h1{ font-size:1.2rem; margin:0; }
    p.lead{ margin:6px 0 18px 0; color:#bcd3e6; font-size:0.95rem; }
    .framecard { background:var(--card); border-radius:12px; padding:10px; box-shadow:0 8px 30px rgba(2,6,23,0.6); min-height:70vh; display:flex; flex-direction:column; }
    .iframe-holder { flex:1; border-radius:8px; overflow:hidden; border:1px solid rgba(255,255,255,0.03); position:relative; background:#000; display:flex; align-items:center; justify-content:center; }
    iframe { width:100%; height:100%; border:0; display:block; }
    .fallback {
      position:absolute; inset:0; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:12px; padding:18px; text-align:center;
      background:linear-gradient(180deg, rgba(2,6,23,0.45), rgba(2,6,23,0.6));
      color: #dbe9f6;
    }
    .hidden { display:none !important; }
    .btn {
      display:inline-block; padding:10px 14px; border-radius:8px; background:var(--accent); color:#042027; text-decoration:none; font-weight:600; box-shadow:0 6px 18px rgba(14,165,164,0.12);
    }
    .muted { color:#93a7bd; font-size:0.9rem; }
    footer { margin-top:12px; color:#9fb6d0; font-size:0.85rem; display:flex; justify-content:space-between; align-items:center; gap:12px; flex-wrap:wrap; }
    @media (max-width:780px){
      .wrap{ margin:10px; }
      header { gap:10px; }
      .logo { width:48px;height:48px;font-size:18px; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">MC</div>
      <div>
        <h1>Classic Minecraft — iframe loader</h1>
        <p class="lead">Attempting to load <code>https://classic.minecraft.net</code> inside an iframe. If framing is blocked by the site, use the fallback button to open it in a new tab.</p>
      </div>
    </header>

    <div class="framecard">
      <div class="iframe-holder" id="frameHolder">
        <iframe id="classicFrame" src="https://classic.minecraft.net" title="Classic Minecraft"></iframe>

        <!-- Fallback overlay shown when iframe appears blocked or on user request -->
        <div id="fallback" class="fallback hidden" role="status" aria-live="polite">
          <div>
            <strong style="font-size:1.05rem">Unable to display site inside this page.</strong>
          </div>
          <div class="muted">Many sites prevent embedding for security reasons (X-Frame-Options or Content-Security-Policy). You can open the original site in a new tab.</div>
          <div>
            <a class="btn" id="openBtn" href="https://classic.minecraft.net" target="_blank" rel="noopener noreferrer">Open Classic Minecraft in new tab</a>
            <button id="tryAgain" class="btn" style="background:#ffffff20; color:var(--text); margin-left:8px;">Reload iframe</button>
          </div>
        </div>
      </div>

      <footer>
        <div class="muted">If the game does not load, the site likely disallows framing. You can still open it directly.</div>
        <div><a href="https://classic.minecraft.net" target="_blank" rel="noopener noreferrer" class="muted">Open site directly</a></div>
      </footer>
    </div>
  </div>

  <script>
    (function(){
      const iframe = document.getElementById('classicFrame');
      const fallback = document.getElementById('fallback');
      const frameHolder = document.getElementById('frameHolder');
      const openBtn = document.getElementById('openBtn');
      const tryAgain = document.getElementById('tryAgain');

      // Show fallback if iframe fails to load within timeout or if a security/frame error occurs.
      // Note: cross-origin access is restricted by design; we cannot reliably inspect iframe contents when successful.
      let loadResolved = false;
      const TIMEOUT_MS = 4000;

      function showFallback(reason) {
        console.warn('iframe fallback:', reason);
        fallback.classList.remove('hidden');
      }

      // If the iframe triggers a load event reasonably quickly, assume it loaded (though content may still be a browser error page).
      iframe.addEventListener('load', () => {
        loadResolved = true;
        // Wait a bit: some browsers fire load even on blocked frames. We do a gentle check:
        setTimeout(() => {
          try {
            // Attempt a trivial property access. This will throw for cross-origin but that is fine.
            // If accessing contentWindow.location works and matches the host, we likely loaded same-origin content (unlikely).
            const cw = iframe.contentWindow;
            // If the iframe was completely blocked by X-Frame-Options, contentWindow may be null or at least unusable.
            if (!cw) {
              showFallback('iframe.contentWindow is null');
              return;
            }
            // If browser displays a "refused to connect" interstitial, load still fired — can't detect that reliably.
            // We'll treat a successful load event as success and hide fallback.
            fallback.classList.add('hidden');
          } catch (err) {
            // Most common: cross-origin access throws. In that case, assume the iframe loaded the remote page successfully.
            // But if framing was blocked entirely, some browsers prevent even creating the iframe — fallback will be shown by timeout.
            fallback.classList.add('hidden');
          }
        }, 300);
      });

      // Timeout: if no load event within TIMEOUT_MS, assume blocked
      setTimeout(() => {
        if (!loadResolved) {
          showFallback('load timeout');
        }
      }, TIMEOUT_MS);

      // User controls
      tryAgain.addEventListener('click', () => {
        fallback.classList.add('hidden');
        // Force reload (invalidate & reload)
        iframe.src = '';
        setTimeout(() => { iframe.src = 'https://classic.minecraft.net'; }, 50);
      });
    })();
  </script>
</body>
</html>
